(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{4053:function(e,t,a){"use strict";var r=a("92aa"),n=a.n(r);n.a},"64c6":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a("9f12"),n=a("53fe"),i=a("9f23"),o=a.n(i),s=function(){function e(t){if(Object(r["a"])(this,e),!t||!t.sid)return null;this.sid_=t.sid,this.onopen_=t.onopen?t.onopen:this.websocketonopen,this.onerror_=t.onerror?t.onerror:this.websocketonerror,this.onmessage_=t.onmessage,this.onclose_=t.onclose?t.onclose:this.websocketclose,this.send_=t.send?t.send:this.send,this.layerObjMap=t.layerObj;var a=this;this.init(a)}return Object(n["a"])(e,[{key:"init",value:function(e){var t=new WebSocket(o.a.VUE_APP_WS_API+this.sid_);t.onopen=this.onopen_.bind(e),t.onerror=this.onerror_.bind(e),t.onmessage=this.websocketonmessage.bind(e),t.onclose=this.onclose_.bind(e)}},{key:"getSid",value:function(){return this.sid_}},{key:"websocketonmessage",value:function(e){this.onmessage_&&this.onmessage_(e,this.layerObjMap)}},{key:"websocketonopen",value:function(){console.log("websocket连接成功")}},{key:"websocketonerror",value:function(e){console.log("websocket连接发生错误")}},{key:"websocketclose",value:function(e){console.log("websocket连接关闭")}}]),e}()},"7dc4":function(e,t,a){"use strict";t["a"]={TRAFFIC_ACCIDENT:"trafficAccident",MAINTENANCE:"maintenance",ROAD_FOG:"roadFog",ROAD_WEATHER:"roadWeather",ROAD_VISIBILITY:"roadVisibility",ROAD_TEMPERATURE:"roadTemperature",ROAD_SPEED:"roadSpeed",CONTROL_CMD_RECEIVE:"controlCmdReceive",GPS_USER:"gpsUser",GPS_CAR:"gpsCar",ALL_CAR:"allCar",LED_BATTERY:"ledBattery",SENSOR_VISIBILITY:"sensorVisibility"}},"92aa":function(e,t,a){},e4c0:function(e,t,a){"use strict";a("4160"),a("c975"),a("b0c0"),a("b680"),a("d3b7"),a("acd8"),a("159b");var r=a("bf2d"),n=(a("96cf"),a("5bc0"),a("4cdf")),i=a("5eee"),o=a("a2c7"),s=a("0710"),c=a("ac29"),l=a("b2fc"),d=a("f403"),u=a("f822"),y=a("7a09"),f=a("47e4"),h=a("9d47"),g=a("8f3a"),m=a("256f"),p=a("64d9"),v=a("9988"),b=a("480c"),w=a("790aa"),O=a("78db"),S=a("3e6b"),L=a("5831"),_=a("91b1"),P=a("6bb3"),j=(a("4354"),a("d81d"),a("a434"),a("e439"),a("9f12")),E=a("53fe"),G=a("a2e1"),M=a("c807"),k=a("64c6"),I=a("c3db"),F=a("b775"),x=a("6be8"),C=function(){function e(t){if(Object(j["a"])(this,e),!t||!t.name)return null;var a=Object.assign(P["a"][t.name],t);this.id_=a.name,this.map_=a.map,this.callback_=a.callback,this.layerObj_=new S["a"]({visible:a.visibleLayer,zIndex:a.zIndex,source:new L["a"],style:a.style}),this.layerObj_.id=this.id_,this.layerObj_.name=a.name,this.jsondata_={},this.datalist_=[],this.overlays_=[],this.isModify=!1,this.webOptions=a,this.finised=!1,this.overlayControl=!0;var r=this;this.modifyChangeHandler=function(e){},this.modifyEndHandler=function(e){r.stopModify()},a.modify&&(this.modifyObj=new M["a"]({source:this.layerObj_.getSource(),pixelTolerance:14,style:[]}),this.modifyObj.on("modifychange",(function(e){r.modifyChangeHandler(e)})),this.modifyObj.on("modifyend",(function(e){r.modifyEndHandler(e)}))),P["a"][a.name].geojsonUrl?Object(F["a"])({url:P["a"][a.name].geojsonUrl,method:"get"}).then((function(e){var t=(new G["a"]).readFeatures(e,{featureProjection:"EPSG:3857"});r.jsondata_.features=t,r.layerObj_.getSource().addFeatures(t),P["a"][a.name].hasLabel&&r.createAllOverlays(),P["a"][a.name].visibleLabel&&r.showLabels(!0),r.callback_&&r.callback_(r.layerObj_),Object.getOwnPropertyDescriptor(P["a"][a.name],"checkTType")&&(P["a"][a.name].checkTType=!1)})).catch((function(e){console.log(e),console.log(P["a"][a.name].geojsonUrl)})):P["a"][a.name].list?Object(F["a"])({url:P["a"][a.name].list,method:"get"}).then((function(e){if(e&&e.length>0){r.datalist_=e;for(var t,i,o,s=0,c=e.length,l=[];s<c;s++)t=e[s],t.longitude&&t.longitude&&(o=Object(m["i"])([parseFloat(t.longitude),parseFloat(t.latitude)],"EPSG:4326","EPSG:3857"),i=new n["a"],i.setId(t.id),i.setProperties(t),P["a"][a.name].radius?i.setGeometry(new u["a"](o,P["a"][a.name].radius)):i.setGeometry(new d["a"](o)),l.push(i));r.jsondata_.features=l,r.layerObj_.getSource().addFeatures(l),P["a"][a.name].hasLabel&&r.createAllOverlays(),P["a"][a.name].visibleLabel&&r.showLabels(!0)}P["a"][a.name].socketSID&&new k["a"]({sid:P["a"][a.name].socketSID,onmessage:r.webSocketOnMessage,layerObj:r}),r.callback_&&r.callback_(r.layerObj_),Object.getOwnPropertyDescriptor(P["a"][a.name],"checkTType")&&(P["a"][a.name].checkTType=!1),r.finised=!0})).catch((function(e){console.log(e)})):r.callback_&&r.callback_(r.layerObj_)}return Object(E["a"])(e,[{key:"getFeatureById",value:function(e){return this.layerObj_.getSource().getFeatureById(e)}},{key:"getFeautres",value:function(){return this.layerObj_.getSource().getFeatures()}},{key:"webSocketOnMessage",value:function(e,t){if(Object(x["c"])(e.data))if(t.finised){var a=JSON.parse(e.data);if(void 0!==a.delete&&a.delete.length>0&&a.delete.forEach((function(e){var a,r;t.getFeatureById(e)&&(t.clear(t.getFeatureById(e)),a=t.jsondata_.features.indexOf(t.getFeatureById(e)),t.jsondata_.features.splice(a,1),r=t.overlays_.indexOf(t.map_.getOverlayById(e)),t.overlays_.splice(r,1),t.map_.removeOverlay(t.map_.getOverlayById(e)))})),void 0!==a.update&&a.update.length>0){var r,i,o;a.update.forEach((function(e){if(e.longitude&&e.longitude)if(t.getFeatureById(e.id)){var a=t.getFeatureById(e.id),s=t.map_.getOverlayById(e.id);"1"===e.isonline&&s?(s.getElement().classList.add("policeCarMove"),s.getElement().style.zIndex="1",o=Object(m["i"])([parseFloat(e.longitude),parseFloat(e.latitude)],"EPSG:4326","EPSG:3857"),a.setGeometry(new d["a"](o)),s&&s.setPosition(o)):s&&s.getElement().classList.contains("policeCarMove")&&(s.getElement().classList.remove("policeCarMove"),s.getElement().style.zIndex="0")}else{if(r=e,o=Object(m["i"])([parseFloat(e.longitude),parseFloat(e.latitude)],"EPSG:4326","EPSG:3857"),i=new n["a"],i.setId(r.id),i.setProperties(r),P["a"][t.webOptions.name].radius?i.setGeometry(new u["a"](o,P["a"][t.webOptions.name].radius)):i.setGeometry(new d["a"](o)),void 0===t.jsondata_.features){var c=[];t.jsondata_.features=c,t.jsondata_.features.push(i)}else t.jsondata_.features.push(i);t.layerObj_.getSource().addFeature(i),t.createOverlay(i),P["a"][t.webOptions.name].visibleLabel&&t.showLabels(!0)}else;}))}}else;}},{key:"setModifyHandler",value:function(e,t){"modifychange"===e?this.modifyChangeHandler=t:"modifyend"===e&&(this.modifyEndHandler=t)}},{key:"startModify",value:function(){this.isModify||(this.map_.addInteraction(this.modifyObj),this.isModify=!0)}},{key:"stopModify",value:function(){this.isModify&&(this.map_.removeInteraction(this.modifyObj),this.isModify=!1)}},{key:"getInstance",value:function(){return this.layerObj_}},{key:"setStyle",value:function(e){this.layerObj_.setStyle(e)}},{key:"getSource",value:function(){return this.layerObj_.getSource()}},{key:"clear",value:function(e){e?this.layerObj_.getSource().removeFeature(e):(this.layerObj_.getSource().clear(!1),this.stopModify())}},{key:"setJsondata",value:function(e){this.jsondata_=e}},{key:"getLayerId",value:function(){return this.id_}},{key:"getLayerName",value:function(){return this.layerObj_.name}},{key:"show",value:function(){this.layerObj_.setVisible(!0)}},{key:"hide",value:function(){this.layerObj_.setVisible(!1),this.stopModify()}},{key:"setIndex",value:function(e){this.layerObj_.setZIndex(e)}},{key:"getVisible",value:function(){return this.layerObj_.getVisible()}},{key:"createOverlay",value:function(e){var t=e.getGeometry().getType(),a=e.getGeometry().getCoordinates();"Circle"===t&&(a=e.getGeometry().getCenter());var r=new s["a"]({id:e.get("id"),element:this.createPopup(e.getProperties()),position:a});this.overlays_.push(r)}},{key:"createAllOverlays",value:function(){for(var e,t,a=this.jsondata_.features,r=a.length,n=0;n<r;n++){e=a[n];var i=e.getGeometry().getType(),o=e.getGeometry().getCoordinates();"Circle"===i&&(o=e.getGeometry().getCenter()),t=new s["a"]({id:e.get("id"),element:this.createPopup(e.getProperties()),position:o}),this.overlays_.push(t)}}},{key:"createPopup",value:function(e){var t=document.createElement("div");t.className="ol-popup";var a=Object(I["a"])(this.id_,e);return a}},{key:"showRoadText",value:function(e){e?this.layerObj_.setStyle(P["a"].road.styleText):this.layerObj_.setStyle(P["a"].road.style)}},{key:"showLabels",value:function(e){var t=this.overlays_,a=t.length,r=0;if(e)for(;r<a;r++)this.map_.removeOverlay(t[r]),this.map_.addOverlay(t[r]);else for(;r<a;r++)this.map_.removeOverlay(t[r])}},{key:"getIncludeFeatures",value:function(e){if(!e)return[];var t,a=this.layerObj_.getSource().getFeatures(),r=0,n=a.length,i=[];if(!a||0==a.length)return[];var o=a[0].getGeometry().getType();if("Point"===o)for(;r<n;r++)t=a[r],e.intersectsCoordinate(t.getGeometry().getCoordinates())&&i.push(t);else if("LineString"===o)for(;r<n;r++){t=a[r];for(var s=t.getGeometry().getCoordinates(),c=0,l=s.length,d=!0;c<l;c++)if(!e.intersectsCoordinate(s[c])){d=!1;break}d&&i.push(t)}else if("Polygon"===o)for(;r<n;r++){t=a[r];var u=t.getGeometry().getCoordinates()[0],y=0;for(jl=u.length,isInclude=!0;y<jl;y++)if(!e.intersectsCoordinate(u[y])){isInclude=!1;break}isInclude&&i.push(t)}return i}},{key:"addFeautre",value:function(e){this.layerObj_.getSource().addFeature(e)}},{key:"addFeautres",value:function(e){this.layerObj_.getSource().addFeatures(e)}},{key:"changeValue",value:function(e){if(e.id){for(var t=this.map_.getOverlayById(e.id),a=0;a<this.jsondata_.features.length;a++)if(this.jsondata_.features[a].getProperties().id===e.id){this.jsondata_.features[a].setProperties(e);break}if(t){var r=t.getElement();return r}return!1}}}]),e}(),T=(a("fb6a"),a("f5dd")),R=a("0af5"),A=function(e){return function(t,a,r){var n,i=t.length,o=r||2;n=a||(2!==o?t.slice():new Array(i));for(var s=0;s<i;s+=o)e(t,n,s);return n}},D={},z=6378137,V=85.0511287798,B=Math.PI/180;D.forward=A((function(e,t,a){var r=Math.max(Math.min(V,e[a+1]),-V),n=Math.sin(r*B);t[a]=z*e[a]*B,t[a+1]=z*Math.log((1+n)/(1-n))/2})),D.inverse=A((function(e,t,a){t[a]=e[a]/z/B,t[a+1]=(2*Math.atan(Math.exp(e[a+1]/z))-Math.PI/2)/B}));var W={},H=[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],N=[75,60,45,30,15,0],U=[[1.410526172116255e-8,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,17337981.2],[-7.435856389565537e-9,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552e-8,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437e-9,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878e-9,8983055095805407e-21,-3.068298e-8,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],Z=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,647795574.6671607,-4082003173.641316,10774905663.51142,-15171875531.51559,12053065338.62167,-5124939663.577472,913311935.9512032,67.5],[.00337398766765,111320.7020202162,4481351.045890365,-23393751.19931662,79682215.47186455,-115964993.2797253,97236711.15602145,-43661946.33752821,8477230.501135234,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];function q(e,t,a){return e=Math.max(e,t),e=Math.min(e,a),e}function J(e,t,a){var r=a-t;while(e>a)e-=r;while(e<t)e+=r;return e}function Y(e,t,a,r){var n=e[a],i=e[a+1],o=r[0]+r[1]*Math.abs(n),s=Math.abs(i)/r[9],c=r[2]+r[3]*s+r[4]*s*s+r[5]*s*s*s+r[6]*s*s*s*s+r[7]*s*s*s*s*s+r[8]*s*s*s*s*s*s;t[a]=o*(n<0?-1:1),t[a+1]=c*(i<0?-1:1)}W.forward=A((function(e,t,a){var r,n=J(e[a],-180,180),i=q(e[a+1],-74,74),o=null;for(r=0;r<N.length;++r)if(i>=N[r]){o=Z[r];break}if(null===o)for(r=N.length-1;r>=0;--r)if(i<=-N[r]){o=Z[r];break}t[a]=n,t[a+1]=i,Y(t,t,a,o)})),W.inverse=A((function(e,t,a){for(var r=Math.abs(e[a+1]),n=null,i=0;i<H.length;i++)if(r>=H[i]){n=U[i];break}Y(e,t,a,n)}));var $={},X=Math.PI,K=6378245,Q=.006693421622965943;function ee(e,t){var a=ae(e-105,t-35),r=re(e-105,t-35),n=t/180*X,i=Math.sin(n);i=1-Q*i*i;var o=Math.sqrt(i);return a=180*a/(K*(1-Q)/(i*o)*X),r=180*r/(K/o*Math.cos(n)*X),[r,a]}function te(e,t){return e<72.004||e>137.8347||(t<.8293||t>55.8271)}function ae(e,t){var a=2*e-100+3*t+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return a+=2*(20*Math.sin(6*e*X)+20*Math.sin(2*e*X))/3,a+=2*(20*Math.sin(t*X)+40*Math.sin(t/3*X))/3,a+=2*(160*Math.sin(t/12*X)+320*Math.sin(t*X/30))/3,a}function re(e,t){var a=300+e+2*t+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return a+=2*(20*Math.sin(6*e*X)+20*Math.sin(2*e*X))/3,a+=2*(20*Math.sin(e*X)+40*Math.sin(e/3*X))/3,a+=2*(150*Math.sin(e/12*X)+300*Math.sin(e/30*X))/3,a}$.toWGS84=A((function(e,t,a){var r=e[a],n=e[a+1];if(!te(r,n)){var i=ee(r,n);r-=i[0],n-=i[1]}t[a]=r,t[a+1]=n})),$.fromWGS84=A((function(e,t,a){var r=e[a],n=e[a+1];if(!te(r,n)){var i=ee(r,n);r+=i[0],n+=i[1]}t[a]=r,t[a+1]=n}));var ne={},ie=(X=Math.PI,3e3*X/180);function oe(e,t,a){var r=e[a]-.0065,n=e[a+1]-.006,i=Math.sqrt(r*r+n*n)-2e-5*Math.sin(n*ie),o=Math.atan2(n,r)-3e-6*Math.cos(r*ie);return t[a]=i*Math.cos(o),t[a+1]=i*Math.sin(o),t}function se(e,t,a){var r=e[a],n=e[a+1],i=Math.sqrt(r*r+n*n)+2e-5*Math.sin(n*ie),o=Math.atan2(n,r)+3e-6*Math.cos(r*ie);return t[a]=i*Math.cos(o)+.0065,t[a+1]=i*Math.sin(o)+.006,t}function ce(e,t,a){var r=D.inverse(e,t,a);return r=ne.fromWGS84(r,r,a),W.forward(r,r,a)}function le(e,t,a){var r=W.inverse(e,t,a);return r=ne.toWGS84(r,r,a),D.forward(r,r,a)}function de(e,t,a){var r=W.inverse(e,t,a);return ne.toWGS84(r,r,a)}function ue(e,t,a){var r=ne.fromWGS84(e,t,a);return W.forward(r,r,a)}ne.toWGS84=function(e,t,a){var r=A(oe)(e,t,a);return $.toWGS84(r,r,a)},ne.fromWGS84=function(e,t,a){var r=$.fromWGS84(e,t,a);return A(se)(r,r,a)};var ye=[72.004,.8293,137.8347,55.8271],fe=new T["a"]({code:"baidu",extent:Object(R["a"])(ye,ue),units:"m"});Object(m["c"])(fe),Object(m["b"])("EPSG:4326",fe,ue,de),Object(m["b"])("EPSG:3857",fe,ce,le);D.forward,D.inverse;var he,ge,me,pe,ve,be,we,Oe,Se,Le,_e={},Pe={},je={init:Ge,getMap:function(){return he},converBaiduPrj2Lnglat:function(e){if(!e||!e.getType)return null;var t=e.getCoordinates(),a=e.getType();if("Point"===a)return Object(m["i"])([t[0],t[1]],"EPSG:3857","EPSG:4326");if("LineString"===a){for(var r,n=0,i=t.length,o=[];n<i;n++)r=t[n],r=Object(m["i"])([parseFloat(r[0]),parseFloat(r[1])],"EPSG:3857","EPSG:4326"),o.push(r);return o}if("Polygon"===a){for(var s,c=0,l=t[0].length,d=[];c<l;c++)s=t[0][c],s=Object(m["i"])([parseFloat(s[0]),parseFloat(s[1])],"EPSG:3857","EPSG:4326"),d.push(s);return[d]}},addPoint:function(e,t){if(_e[e]){t=Object(m["i"])([parseFloat(t[0]),parseFloat(t[1])],"EPSG:4326","EPSG:3857");var a=new n["a"]({geometry:new d["a"](t)});return _e[e].getSource().addFeature(a),a}},addLayer:function(e,t){var a,n;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:a={map:he},"string"===typeof e?a.name=e:"object"===Object(r["a"])(e)&&(a=Object.assign(a,e)),t&&(a.callback=t),n=new C(a),he.addLayer(n.getInstance()),_e[a.name]=n;case 6:case"end":return i.stop()}}))},addData2Layer:function(e,t){if(_e[e]){for(var a,r,i=[],o=0,s=t.length;o<s;o++)a=t[o],r=new n["a"],r.setId(a.id),r.setGeometry(new d["a"](Object(m["i"])([parseFloat(a.longitude),parseFloat(a.latitude)],"EPSG:4326","EPSG:3857"))),r.setProperties(a),i.push(r);_e[e].addFeautres(i)}},addFeautre:function(e,t){_e[e]&&_e[e].addFeautre(t)},addFeautres:function(e,t){if(_e[e])for(var a=0,r=t.length;a<r;a++)_e[e].addFeautre(t[a])},getFeautres:function(e){if(_e[e])return _e[e].getSource().getFeatures()},getVisible:function(e){if(_e[e])return _e[e].getVisible()},addEvent:function(e,t){e&&t&&(Pe[e]=t)},removeEvent:function(e){Pe[e]&&delete Pe[e]},showRoadText:function(e){_e["road"].showRoadText(e)},addRoadToDrawLayer:function(e){var t="drawLayer",a=new p["a"],r=a.readFeature(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});_e[t].getSource().addFeature(r)},drawRoad:function(e){var t,a;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:if(!be){r.next=4;break}_e["drawLayer"].clear(),r.next=11;break;case 4:return r.next=6,regeneratorRuntime.awrap(je.addLayer("drawLayer"));case 6:t=_e["drawLayer"].getSource(),be=new c["a"]({stopClick:!0,source:t,type:"LineString"}),be.on("drawend",(function(t){_e["drawLayer"].clear();var a=new p["a"],r=a.writeFeature(t.feature,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});e&&e(r)})),he.addInteraction(be),_e["road"]&&(a=new l["a"]({source:_e["road"].getInstance().getSource()}),he.addInteraction(a));case 11:case"end":return r.stop()}}))},drawWithType:function(e,t,a){if(e)if(be)_e["drawLayer"].clear();else{je.addLayer("drawLayer");var r=_e["drawLayer"].getSource(),n=n||!1;be=new c["a"]({stopClick:!0,source:r,freehand:n,type:e}),be.on("drawend",(function(e){_e["drawLayer"].clear(),t&&t(e.feature.getGeometry())})),he.addInteraction(be)}else console.log("MapManager.draw() parameter drawType is undefined")},startDraw:function(e,t){Oe&&he.removeInteraction(Oe),be?_e["drawLayer"].clear():je.drawPointFn(e,t),he.addInteraction(be)},resetDrawLayerStyle:function(){_e["drawLayer"].setStyle(P["a"]["drawLayer"].style)},setStyle:function(e,t){_e[e].setStyle(P["a"][e][t])},drawPointFn:function(e,t){_e["drawLayer"]||je.addLayer({name:"drawLayer",style:P["a"][e].style}),_e["drawLayer"].setStyle(P["a"][e].style);var a=_e["drawLayer"].getSource();be=new c["a"]({stopClick:!0,source:a,type:"Point"}),be.on("drawend",(function(e){_e["drawLayer"].clear();var a=e.feature.getGeometry().getCoordinates();a=Object(m["i"])(a,"EPSG:3857","EPSG:4326"),t([a[0].toFixed(6),a[1].toFixed(6)])}))},removeDraw:function(e){void 0===e?(he.removeInteraction(be),he.removeInteraction(Oe)):(he.removeInteraction(e),he.removeInteraction(be),he.removeInteraction(Oe))},DrawPoint:function(e,t,a){je.drawPointFn(e,t,!0),he.addInteraction(be),a&&2==a.length&&""!=a[0]&&je.addPoint("drawLayer",a)},startDrawWithSelCamera:function(e){if(be&&he.removeInteraction(be),Oe)_e["aroundLayer"].clear();else{_e["aroundLayer"]||je.addLayer({name:"aroundLayer",visibleLayer:!0,style:P["a"]["drawLayer"].style,zIndex:3e3}),_e["aroundLayer"].setStyle(P["a"]["drawLayer"].style);var t=_e["aroundLayer"].getSource();Oe=new c["a"]({stopClick:!0,source:t,type:"Polygon"}),Oe.on("drawend",(function(t){_e["aroundLayer"].clear();var a=[],r=je.getIncludeFeaturesOnLayer("camera",t.feature.getGeometry());r.forEach((function(e){a.push(e.getProperties())})),e&&e(a)}))}he.addInteraction(Oe)},addCircle:function(e,t,a,r){if(e&&2==e.length){e=Object(m["i"])([parseFloat(e[0]),parseFloat(e[1])],"EPSG:4326","EPSG:3857"),je.resetDrawLayerStyle();var i=new u["a"](e,t);_e["drawLayer"]||je.addLayer("drawLayer");var o=new n["a"]({geometry:i}),s=_e["drawLayer"].getSource();if(s.addFeature(o),a){var c=[e[0]+t,e[1]],l=0;we=new n["a"],we.setGeometry(new d["a"](c)),we.setProperties({layerid:"drawLayer",canclick:1,text:Math.round(t-1500)+"米",rotation:2*Math.PI-l}),we.setStyle(P["a"]["drawLayer"].modifyPointWithText),s.addFeature(we),_e["drawLayer"].setModifyHandler("modifychange",(function(e){var t=e.features,a=e.mapBrowserEvent.getCenter(),r=e.mapBrowserEvent.getRadius();we&&(je.cleanCircleLayer(we),we=null);var i=Math.atan2(t[1]-a[1],t[0]-a[0]);we=new n["a"],we.setGeometry(new d["a"](t)),we.setProperties({layerid:"drawLayer",canclick:1,text:Math.round(r-1500)+"米",rotation:2*Math.PI-i}),we.setStyle(P["a"]["drawLayer"].modifyPointWithText),s.addFeature(we)})),_e["drawLayer"].setModifyHandler("modifyend",(function(e){if(_e["drawLayer"].stopModify(),e.features.getLength()>0){e.features.item(0).getGeometry().getRadius(),e.features.item(0).getGeometry().getCenter();e.mapBrowserEvent.coordinate;r&&r(e.features.item(0))}}))}return o}},cleanCircleLayer:function(e){_e["drawLayer"]&&(e?_e["drawLayer"].clear(e):_e["drawLayer"].clear())},cleanCircleLayer2:function(e,t){_e[e]&&(t?_e[e].clear(t):_e[e].clear())},cleanLayer:function(e){_e[e]&&_e[e].clear()},showLabels:function(e,t){_e[e]&&_e[e].showLabels(t)},showLayer:function(e,t,a){_e[e]&&(t?_e[e].show():_e[e].hide(),a&&a())},getIncludeFeaturesOnLayer:function(e,t){return _e[e]?_e[e].getIncludeFeatures(t):[]},centerAt:function(e){var t=he.getView();e=Object(m["i"])([parseFloat(e[0]),parseFloat(e[1])],"EPSG:4326","EPSG:3857"),t.setCenter(e)},zoomHome:function(){var e=he.getView();e.animate({zoom:ge.zoom,center:Object(m["i"])(ge.center,"EPSG:4326","EPSG:3857"),duration:500})},zoomIn:function(){var e=he.getView(),t=e.getZoom();e.animate({zoom:t-1,duration:500})},zoomOut:function(){var e=he.getView(),t=e.getZoom();e.animate({zoom:t+1,duration:500})},zoomCenter:function(e){if(e[0]||e[1]){var t=he.getView(),a=Object(m["i"])(e,"EPSG:4326","EPSG:3857");t.animate({center:a,duration:500})}},clearCircleAndLayer:function(e){void 0===e&&(e="aroundLayer"),je.cleanLayer(e),je.cleanLayer("roadSelLayer"),je.cleanCircleLayer()},atlongDistance:function(e,t){return Object(w["a"])(e,t)},changeValue:function(e,t){if(_e[e]&&t)return _e[e].changeValue(t)},saveImage:function(e){he.once("rendercomplete",(function(){Object(v["toPng"])(he.getTargetElement(),ge.exportOptions).then((function(t){var a=document.getElementById(e);a.href=t,a.click()}))})),he.renderSync()}},Ee={mapContainer:"mapContainer",projection:"EPSG:4326",controls:[],crossOrigin:"anonymous",center:[115.472601,35.062753],zoom:12,maxZoom:5,minZoom:0,resolution:.00029743262572878496,maxResolution:.0011897305029151398,minResolution:38071376093284474e-21,url:"http://192.168.2.180:8080/geowebcache/service/wmts",matrixSet:"EPSG:4326_chibi4326",format:"image/png",layer:"chibi4326",fullExtent:[113.49610335,29.4449077,114.26239965,30.0153083],matrixIds:["EPSG:4326_chibi4326:0","EPSG:4326_chibi4326:1","EPSG:4326_chibi4326:2","EPSG:4326_chibi4326:3","EPSG:4326_chibi4326:4","EPSG:4326_chibi4326:5"],resolutions:[.0011897305029151398,.0005948652514575699,.00029743262572878496,.0001522855043731379,7614275218656895e-20,38071376093284474e-21],tileOrigin:[-400,400],tileSize:[256,256],wrapX:!0,exportOptions:{filter:function(e){return!e.className||-1===e.className.indexOf("ol-control")}}};function Ge(e){ge=Object.assign(Ee,e),ge.center=[115.470876,35.255208],ge.zoom=11,ge.center=[117.578175,34.079237],ge.zoom=15,e&&e.maxZoom||(ge.maxZoom=ge.resolutions.length-1);Object(m["f"])(ge.projection);for(var t=new Array(19),a=0;a<19;++a)t[a]=Math.pow(2,18-a);var r=new O["a"]({resolutions:t,origin:[0,0]}),n=new h["a"];n.setUnits("metric"),he=new i["a"]({controls:Object(g["a"])().extend([n]),target:ge.mapContainer,view:new o["a"]({center:Object(m["i"])(ge.center,"EPSG:4326","EPSG:3857"),zoom:ge.zoom}),oadTilesWhileAnimating:!0,layers:[new b["a"]({source:new _["a"]({projection:"baidu",tileGrid:r,tileUrlFunction:function(e,t,a){if(!e)return"";var r=e[0],n=e[1],i=e[2];return n<0&&(n="M"+-n),i<0&&(i="M"+-i),ge.url="http://online3.map.bdimg.com/onlinelabel/?qt=tile&x="+n+"&y="+i+"&z="+r+"&styles=pl&udt=20151021&scaler=1&p=1",ge.url},url:ge.url})})]}),be=null,pe=document.createElement("div"),pe.className="ol-popup",me=new s["a"]({element:pe}),Me(),Fe(),this.addLayer("aroundLayer"),this.addLayer("roadSelLayer"),this.addLayer("drawLayer"),this.addLayer("startLayer"),this.addLayer("endlLayer")}function Me(){he.on("pointermove",(function(e){if(!e.dragging){var t=he.getEventPixel(e.originalEvent);ke(t)}})),Se=new S["a"]({zIndex:1e3,source:new L["a"]}),Se.id="highlightLayer",Se.name="highlightLayer",_e["highlightLayer"]=Se,he.addLayer(Se)}var ke=function(e){var t=he.forEachFeatureAtPixel(e,(function(e,t){return e}));if(t||(he.getTargetElement().style.cursor="auto"),Le)Le!==t&&(Se.getSource().removeFeature(Le),Le=null);else if(t){he.getTargetElement().style.cursor="pointer";var a=t.get("layerid");if(!a)return;var r=P["a"][a].styleHighlight;if(!r)return;Le=new n["a"]({geometry:t.getGeometry()}),Le.setStyle(P["a"][a].styleHighlight),Se.getSource().addFeature(Le)}};function Ie(){_e["drawLayer"]&&_e["drawLayer"].stopModify(),he.on("pointermove",(function(e){if(he.hasFeatureAtPixel(e.pixel,{layerFilter:function(e){return"VECTOR"===e.type&&"drawLayer"===e.id}})){var t=he.getFeaturesAtPixel(e.pixel,{layerFilter:function(e){return"VECTOR"===e.type&&"drawLayer"===e.id}});t&&t.length>0&&t[0].get("layerid")&&t[0].get("canclick")&&_e["drawLayer"].startModify()}}))}function Fe(){Ie(),he.on("click",(function(e){he.getEventPixel(e.originalEvent);if(!he.hasFeatureAtPixel(e.pixel,{layerFilter:function(e){return"VECTOR"===e.type}}))return he.removeOverlay(me),void(ve&&(he.addOverlay(ve),ve=null));var t=he.getFeaturesAtPixel(e.pixel,{layerFilter:function(e){return"VECTOR"===e.type}}),a=t[0];t.length>1&&void 0==a.getId()&&(a=t[1]);var r;e.coordinate;a.getGeometry().constructor===d["a"]?(r=a.getGeometry().getCoordinates(),ve&&he.addOverlay(ve),a.getId()&&(ve=he.getOverlayById(a.getId())),ve&&he.removeOverlay(ve),a.get("name")&&(pe.innerHTML=a.get("name"),me.setPosition(r),he.addOverlay(me)),a.get("layerid")&&Pe[a.get("layerid")]&&Pe[a.get("layerid")](a.getProperties())):a.getGeometry().constructor===u["a"]?a.get("layerid")&&Pe[a.get("layerid")]&&Pe[a.get("layerid")](a.getProperties()):a.getGeometry().constructor===y["a"]?a.get("layerid")&&Pe[a.get("layerid")]&&Pe[a.get("layerid")](a.getProperties()):a.getGeometry().constructor===f["a"]&&a.get("layerid")&&Pe[a.get("layerid")]&&Pe[a.get("layerid")](a.getProperties())}))}t["a"]=je},e7fe:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tileMap"},[a("div",{ref:"containerMap",attrs:{id:"containerMap"}})])},n=[],i=(a("d81d"),a("e4c0")),o={name:"tileMap",props:{params:{type:Object,default:function(){return{}}}},components:{},data:function(){return{map:null,defaultMap:{mapContainer:"containerMap",projection:"EPSG:4326",controls:[],center:[113.89,29.72],resolution:.00029743262572878496,maxResolution:.0011897305029151398,minResolution:38071376093284474e-21,url:"http://192.168.2.180:8080/geowebcache/service/wmts",matrixSet:"EPSG:4326_chibi4326",format:"image/png",layer:"chibi4326",fullExtent:[113.49610335,29.4449077,114.26239965,30.0153083],matrixIds:["EPSG:4326_chibi4326:0","EPSG:4326_chibi4326:1","EPSG:4326_chibi4326:2","EPSG:4326_chibi4326:3","EPSG:4326_chibi4326:4","EPSG:4326_chibi4326:5"],resolutions:[.0011897305029151398,.0005948652514575699,.00029743262572878496,.0001522855043731379,7614275218656895e-20,38071376093284474e-21],tileOrigin:[-400,400],tileSize:[256,256],wrapX:!0}}},methods:{startDrawPoint:function(e,t,a){i["a"].startDraw(e,t),a&&2==a.length&&""!=a[0]&&(i["a"].addPoint("drawLayer",a),i["a"].centerAt(a))},startDrawWithSelCamera:function(e){i["a"].startDrawWithSelCamera(e)},showRoadText:function(e){i["a"].showRoadText(e)},drawPolygon:function(e){i["a"].drawWithType("Polygon",e)},drawCircle:function(e){i["a"].drawWithType("Circle",e)},drawRoad:function(e,t,a,r){i["a"].addLayer({name:"road",visibleLayer:!0}),i["a"].addLayer(a,(function(){var e=i["a"].getFeautres(a);r&&r(e)})),i["a"].showLayer(a,!0),i["a"].drawRoad(e),t&&i["a"].addRoadToDrawLayer(t)},addCircle:function(e,t){i["a"].addCircle(e,t)},resetMap:function(){this.map.updateSize()},addLayer:function(e){i["a"].addLayer(e)},showLayer:function(e,t){i["a"].showLayer(e,t)},cleanLayer:function(e){i["a"].cleanLayer(e)}},mounted:function(){var e=Object.assign(this.defaultMap,this.params);i["a"].init(e),this.map=i["a"].getMap(),this.$emit("mapInfo",this.map)},updated:function(){}},s=o,c=(a("4053"),a("2877")),l=Object(c["a"])(s,r,n,!1,null,"14e8b697",null);t["a"]=l.exports},fd54:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"echartsBox",style:{width:e.options.width,height:e.options.height}},[a("div",{style:{width:e.options.width,height:e.options.height},attrs:{id:e.options.id}})])},n=[],i=a("313e"),o=a.n(i),s={props:{options:{type:Object,default:function(){}}},data:function(){return{}},methods:{resize:function(){this.options.el.resize()},updated:function(){this.options.el&&this.options.el.setOption(this.options.option)}},created:function(){},mounted:function(){var e=this;e.options.el=o.a.init(document.getElementById(e.options.id)),e.options.el.setOption(e.options.option)}},c=s,l=a("2877"),d=Object(l["a"])(c,r,n,!1,null,"249d218a",null);t["a"]=d.exports}}]);