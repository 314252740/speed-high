(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34d4181a"],{"7c8c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.isAdd?"新增用户":"修改用户",closeOnClickModal:!1,visible:e.visible,width:"600px","label-width":"80px"},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"form",attrs:{"status-icon":"",model:e.dataForm,rules:e.rules,size:"small","label-position":"right","label-width":"70px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{clearable:"",required:"true",minlength:"6",maxlength:"20",autocomplete:"off"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),a("el-form-item",{attrs:{label:"账号",prop:"account"}},[a("el-input",{attrs:{clearable:"",minlength:"6",maxlength:"20",autocomplete:"off"},model:{value:e.dataForm.account,callback:function(t){e.$set(e.dataForm,"account",t)},expression:"dataForm.account"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:this.isAdd,expression:"this.isAdd"}],attrs:{label:"密码",prop:"pwd",rules:{required:this.isAdd,message:"密码不能为空",trigger:"blur"}}},[a("el-input",{attrs:{clearable:"",type:"password",minlength:"3",maxlength:"20",autocomplete:"off"},model:{value:e.dataForm.pwd,callback:function(t){e.$set(e.dataForm,"pwd",t)},expression:"dataForm.pwd"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:this.isAdd,expression:"this.isAdd"}],attrs:{label:"确认密码",prop:"repeatPasswd"}},[a("el-input",{attrs:{clearable:"",type:"password",minlength:"3",maxlength:"20",autocomplete:"off"},model:{value:e.dataForm.repeatPasswd,callback:function(t){e.$set(e.dataForm,"repeatPasswd",t)},expression:"dataForm.repeatPasswd"}})],1),a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{attrs:{clearable:"",autocomplete:"off"},model:{value:e.dataForm.mobile,callback:function(t){e.$set(e.dataForm,"mobile",t)},expression:"dataForm.mobile"}})],1),a("el-form-item",{attrs:{label:"警员",prop:"puserId"}},[a("el-select",{attrs:{filterable:"",placeholder:"可搜索选择警员"},model:{value:e.dataForm.puserId,callback:function(t){e.$set(e.dataForm,"puserId",t)},expression:"dataForm.puserId"}},e._l(e.options,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",clearable:"",rows:3,maxlength:"300",autocomplete:"off"},model:{value:e.dataForm.memo,callback:function(t){e.$set(e.dataForm,"memo",t)},expression:"dataForm.memo"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.doSubmit}},[e._v("确 定")]),a("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("取 消")])],1)],1)},o=[],s=a("c24f"),l={data:function(){var e=this,t=function(t,a,r){""===a?r(new Error("请输入密码")):(""!==e.dataForm.repeatPasswd&&e.$refs.dataForm.validateField("repeatPasswd"),r())},a=function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.dataForm.pwd?r(new Error("两次输入密码不一致!")):r()};return{options:[],loading:!1,visible:!1,isAdd:!1,dataForm:{name:"",account:"",pwd:"",repeatPasswd:"",mobile:"",memo:"",puserId:""},rules:{pass:[{validator:t,trigger:"blur"}],repeatPasswd:[{validator:a,trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],account:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"},{pattern:/^[A-Za-z]+$/,message:"只能输入英文字符",trigger:"blur"}]}}},methods:{cancel:function(){this.resetForm()},resetForm:function(){this.visible=!1,this.$refs["form"].resetFields(),this.dataForm={name:"",account:"",pwd:"",repeatPasswd:"",mobile:"",memo:"",puserId:""}},doSubmit:function(){var e=this;this.dataForm.pwd===this.dataForm.repeatPasswd?this.$refs["form"].validate((function(t){t&&(e.isAdd?Object(s["a"])(e.dataForm).then((function(t){"ok"===t.result?(e.resetForm(),e.$message({message:"添加成功",type:"success"})):e.$message({message:"添加失败",type:"error"}),e.loading=!1,e.$parent.page=0,e.$parent.dialogFormVisible=!1,e.$parent.init()})).catch((function(e){console.log("error:"+e),console.log(e)})):e.doEdit())})):this.$message.error("两次输入密码不一致")},doEdit:function(){var e=this;this.isAdd||Object(s["d"])(this.dataForm).then((function(t){e.resetForm(),e.$message({message:"修改成功",type:"success"}),e.loading=!1,e.$parent.dialogFormVisible=!1,e.$parent.init()})).catch((function(e){console.log("error:"+e),console.log(e)}))}},created:function(){var e=this;Object(s["e"])().then((function(t){if("ok"===t.result){var a=t.data.result;e.options=a}}))}},i=l,n=a("2877"),d=Object(n["a"])(i,r,o,!1,null,null,null);t["default"]=d.exports},c24f:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return s})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return i})),a.d(t,"e",(function(){return n}));var r=a("b775");function o(e){return Object(r["a"])({url:"api/system/user",method:"POST",data:e})}function s(e){return Object(r["a"])({url:"api/system/user",method:"PATCH",data:e})}function l(e){return Object(r["a"])({url:"api/system/user/"+e,method:"DELETE"})}function i(e,t){return Object(r["a"])({url:"api/system/user/roles/"+e+"/"+t,method:"POST"})}function n(){return Object(r["a"])({url:"module/syspoliceusers",method:"GET"})}}}]);